<div class="odEditExercise" ng-if="$ctrl.create || $ctrl.exerciseLoaded">
  <form ng-submit="$ctrl.submit()" name="$ctrl.codeEntryForm" novalidate>
    <md-card>
      <textarea ui-codemirror="{ onLoad: $ctrl.codeMirrorLoaded.bind($ctrl) }"
        ui-codemirror-opts="$ctrl.opts" ng-model="$ctrl.code"></textarea>
    </md-card>
    <md-card class="inputCard" layout="row" layout-align="start center">
      <div class="nameDescContainer" flex="60">
        <md-input-container class="textInput">
          <label>Exercise Name</label>
          <input ng-model="$ctrl.name" aria-label="exercise name" name="exerciseName" required autocomplete="off"/>
          <div ng-messages="$ctrl.codeEntryForm.exerciseName.$error">
            <div ng-message="required">Name is required.</div>
          </div>
        </md-input-container>
      </div>
      <div class="errorContainer" flex>
        <number-chips ng-model="$ctrl.errorLines" max-chip-num="$ctrl.getLineCount()"
          form="$ctrl.codeEntryForm"></number-chips>
      </div>
    </md-card>
        
    <md-card class="inputCard">
      <md-input-container class="textInput">
        <label>Exercise Description</label>
        <textarea ng-model="$ctrl.description" aria-label="exercise description" name="exerciseDescription"
          rows="3" autocomplete="off"></textarea>
      </md-input-container>
    </md-card>
    <div layout="row" layout-align="end center">
      <span class="errorMessage" ng-show="!$ctrl.code">{{$ctrl.errorMessage}}</span>
    </div>
    <div layout="row" layout-align="end center">
      <md-button type="button" class="md-raised md-accent" aria-label="clear" ui-sref="admin">Cancel</md-button>
      <md-button type="submit" class="md-primary" ng-disabled="$ctrl.submitted"
        ng-class="{'md-raised': !$ctrl.submitted}" aria-label="debug">Save</md-button>
    </div>
  </form>
</div>

<div ng-show="!$ctrl.exerciseLoaded && !$ctrl.create">
  <md-progress-circular md-mode="indeterminate"></md-progress-circular>
</div>